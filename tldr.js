// Generated by CoffeeScript 1.4.0
(function() {
  var doAnim, hideMedia, hideNarrative, hidePanel, showMedia, showNarrative, showPanel;

  if (Meteor.isClient) {
    doAnim = function(node, prop, fn) {
      return $(node).animate(prop, {
        duration: 300,
        specialEasing: {
          width: 'linear',
          height: 'easeOutBounce'
        },
        complete: function() {
          if ('function' === typeof fn) {
            return fn();
          }
        }
      });
    };
    hidePanel = function() {
      var node;
      node = $("#tldr-panel-container");
      node.hide();
      return doAnim(node, {
        'margin-right': '-1000px'
      }, function() {
        return $('.tldr-button-edit-cancel').addClass('tldr-button-edit').removeClass('tldr-button-edit-cancel').removeClass('ss-writingdisabled').addClass('ss-write');
      });
    };
    showPanel = function() {
      var node;
      node = $("#tldr-panel-container");
      node.show();
      return doAnim(node, {
        'margin-right': '0px'
      }, function() {
        return $('.tldr-button-edit').removeClass('tldr-button-edit').addClass('tldr-button-edit-cancel').addClass('ss-writingdisabled').removeClass('ss-write');
      });
    };
    showNarrative = function() {
      var node;
      node = $("#tldr-narrative-container");
      node.show();
      $("#tldr-panel-container").hide();
      return doAnim(node, {
        'margin-right': '0px'
      }, function() {
        return $('.tldr-button-narrative').removeClass('tldr-button-narrative').addClass('tldr-button-narrative-cancel').text('notebook');
      });
    };
    hideNarrative = function() {
      var node;
      node = $("#tldr-narrative-container");
      node.hide();
      return doAnim(node, {
        'margin-right': '-2000px'
      }, function() {
        return $('.tldr-button-narrative-cancel').addClass('tldr-button-narrative').removeClass('tldr-button-narrative-cancel').text('openbook');
      });
    };
    showMedia = function() {
      var node;
      node = $("#tldr-media-container");
      node.show();
      return doAnim(node, {
        'margin-right': '0px'
      }, function() {
        console.log('nasty');
        return $('.tldr-button-media').removeClass('tldr-button-media').addClass('tldr-button-media-cancel').text('eject');
      });
    };
    hideMedia = function() {
      var node;
      node = $("#tldr-media-container");
      node.hide();
      return doAnim(node, {
        'margin-right': '-2000px'
      }, function() {
        return $('.tldr-button-media-cancel').addClass('tldr-button-media').removeClass('tldr-button-media-cancel').text('images');
      });
    };
    Template.controls.events({
      "click .tldr-button-edit": function(e) {
        showPanel();
        hideNarrative();
        return hideMedia();
      }
    });
    Template.controls.events({
      "click .tldr-button-edit-cancel": function(e) {
        return hidePanel();
      }
    });
    Template.controls.events({
      "click .tldr-button-narrative": function(e) {
        showNarrative();
        hidePanel();
        return hideMedia();
      }
    });
    Template.controls.events({
      "click .tldr-button-narrative-cancel": function(e) {
        return hideNarrative();
      }
    });
    Template.controls.events({
      "click .tldr-button-media": function(e) {
        showMedia();
        hideNarrative();
        return hidePanel();
      }
    });
    Template.controls.events({
      "click .tldr-button-media-cancel": function(e) {
        return hideMedia();
      }
    });
  }

  if (Meteor.isServer) {
    Meteor.startup(function() {
      return console.log("Restart > " + new Date().getTime());
    });
  }

}).call(this);
